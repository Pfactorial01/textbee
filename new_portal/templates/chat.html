{% extends "base.html" %} {% block content %}
<div class="chat-container">
	<div class="row h-100">
		<!-- Messages Panel (8 columns) -->
		<div class="col-md-8 chat-messages-panel">
			<div class="card h-100">
				<div
					class="card-header bg-primary text-white d-flex align-items-center"
				>
					<div
						class="chat-contact-info d-flex justify-content-between w-100"
						id="contactBanner"
					>
						<div>
							<h5 class="mb-0" id="currentChatContact">
								Select a contact
							</h5>
							<small
								class="text-white-50"
								id="currentChatStatus"
							></small>
						</div>
						<!-- New Delete Icon (hidden by default) -->
						<i
							class="bi bi-trash"
							id="deleteIcon"
							style="display: none"
						></i>
					</div>
				</div>

				<div class="card-body chat-messages" id="chatMessages">
					<div
						class="text-center text-muted mt-5"
						id="noChatSelected"
					>
						<i class="bi bi-chat-dots display-4"></i>
						<p class="mt-3">Select a contact to start chatting</p>
					</div>
					<!-- Messages will be dynamically inserted here -->
				</div>
				<div class="card-footer">
					<form id="messageForm" class="message-input-form">
						<div class="input-group">
							<input
								type="text"
								class="form-control"
								placeholder="Type a message..."
								id="messageInput"
								disabled
							/>
							<button
								class="btn btn-primary"
								type="submit"
								id="sendButton"
								disabled
							>
								<i class="bi bi-send"></i>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Contacts Panel (4 columns) -->
		<div class="col-md-4 chat-contacts-panel">
			<div class="card h-100">
				<div class="card-header">
					<div class="input-group">
						<span class="input-group-text">
							<i class="bi bi-search"></i>
						</span>
						<input
							type="text"
							class="form-control"
							placeholder="Search contacts..."
							id="contactSearch"
						/>
					</div>
					<!-- New Chat Button -->
					<button
						id="newChatButton"
						class="btn btn-success mt-2"
						data-bs-toggle="modal"
						data-bs-target="#newChatModal"
					>
						New Chat
					</button>
				</div>
				<div class="card-body contacts-list p-0" id="contactsList">
					<div class="d-flex justify-content-center p-3">
						<div class="spinner-border text-primary" role="status">
							<span class="visually-hidden"
								>Loading contacts...</span
							>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal for New Chat -->
<div
	class="modal fade"
	id="newChatModal"
	tabindex="-1"
	aria-labelledby="newChatModalLabel"
	aria-hidden="true"
>
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="newChatModalLabel">
					Start a New Chat
				</h5>
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="modal"
					aria-label="Close"
				></button>
			</div>
			<div class="modal-body">
				<form id="newChatForm">
					<div class="mb-3">
						<label for="phoneNumber" class="form-label"
							>Phone Number</label
						>
						<input
							type="text"
							class="form-control"
							id="phoneNumber"
							required
						/>
					</div>
					<div class="mb-3">
						<label for="message" class="form-label">Message</label>
						<textarea
							class="form-control"
							id="message"
							rows="3"
							required
						></textarea>
					</div>
					<button type="submit" class="btn btn-primary">
						Send Message
					</button>
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock %}
